# Ubuntu单系统安装&与Windows 10 传统引导的双系统共存

## BIOS、UEFI、MBR和GPT
参考资料：[操作系统的启动与引导问题 BIOS、UEFI、MBR、GPT](https://www.cnblogs.com/sddai/p/6354289.html)

- BIOS（Basic Input Output System）全称"基本输入输出系统"。它是一组固化到计算机内主板上一个ROM芯片上的程序，它保存着计算机最重要的基本输入输出的程序、开机后自检程序和系统自启动程序，它可从CMOS中读写系统设置的具体信息。 其主要功能是为计算机提供最底层的、最直接的硬件设置和控制。  
  
- UEFI（Unified Extensible Firmware Interface）全称“统一的可扩展固件接口”， 是一种详细描述全新类型接口的标准。这种接口用于操作系统自动从预启动的操作环境，加载到一种操作系统上，从而使开机程序化繁为简，节省时间。可扩展固件接口（Extensible Firmware Interface，EFI）是 Intel 为 PC 固件的体系结构、接口和服务提出的建议标准。其主要目的是为了提供一组在 OS 加载之前（启动前）在所有平台上一致的、正确指定的启动服务。传统BIOS主要支持MBR引导，UEFI则是取代传统BIOS，它加入了对新硬件的支持，其中就有2TB以上硬盘。  
  
- MBR（Master Boot Record），即硬盘的主引导记录。为了便于理解，一般将MBR分为广义和狭义两种：广义的MBR包含整个扇区（引导程序、分区表及分隔标识），也就是上面所说的主引导记录；而狭义的MBR仅指引导程序而言。  
  
- GPT（GUID Partition Table），即全局唯一标识分区列表，是一个物理硬盘的分区结构。它用来替代BIOS中的主引导记录分区表（MBR）。它是可扩展固件接口（EFI）标准（被Intel用于替代个人计算机的BIOS）的一部分，被用于替代BIOS系统中的一32bits来存储逻辑块地址和大小信息的主开机纪录（MBR）分区表。

## Win10安装Ubuntu双系统的问题

在MBR引导的Windows操作系统上安装Ubuntu会非常麻烦，一般需要修改Windows的引导方式。但现在常用的Windows10的磁盘配置是SSD+机械硬盘的组合，操作系统放在SSD上。同理，可以另找一块SSD，先安装好Ubuntu的单系统，再与装有Windows10的SSD组合，这样可以避免丢掉Windows10的引导风险，安装过程相对就简单很多了。

## Ubuntu系统安装光盘刻录

和PE不太一样的是，Ubuntu系统安装需要直接去官网下载镜像，制作U盘引导或者刻录CD引导。

比较杯具的是，U盘引导对接口的稳定性、U盘质量有有比较高的要求，笔者的笔记本USB接口存在供电问题+U盘比较老旧+SSD通过移动硬盘盒接入，基本上把坑都占全了。于是就遇到U盘引导卡在光标闪烁进不去/换U盘安装后Ubuntu在SSD上不能启动等等问题。加上笔记本和台式机都有光驱，索性决定将Ubuntu刻录光盘再安装系统。

- 工具：Nero
- 具体操作：选择ISO文件刻录光盘，由于引导盘不会再变动，顺便勾上封盘选项。

# Ubuntu单系统安装

Windows10操作系统是SSD+机械硬盘的组合，操作系统在SSD上，怕之间装双系统有坑，就把Win10 SSD的接口暂时先拔掉，换上准备装Ubuntu的SSD。因此其实就是Ubuntu单系统安装了。

准备装Ubuntu的SSD大小只有64GB，虽然理论上可以把/home文件目录放到机械硬盘上，不过这次没这么处理，还是采用挂载访问的方式。之前分区不太合理，/boot只分了200多M严重不够，而且根目录也分小了，后来一直报警空间不足。考虑到台式机有32GB内存，索性这次不设置swap交换空间了。

最终分区：

分区 | 格式 |  大小  
-|-|-
|eif|eif|512M|
boot | ext4 | 1G |
/ | ext4 | 30G |
/home | ext4 | 剩余30G+ |

其中EFI分区是最后加的，不设置安装时会跳出警告，当然作为引导分区，可能分配的空间偏大了。这么分其实/home分区可能还是不够，Anaconda一装瞬间就占掉10G+了，因此其他数据文件尽量都通过挂载机械硬盘解决。

# 与Windows10共存

安装Ubuntu后，再把装了Window10的SSD接回去。笔者的情况是开机会默认进入Ubuntu操作系统，如果F12切换进入Window10也没有问题，这样就实现了Ubuntu和传统引导方式的Windows10双系统共存。

> 注意：
> 在Ubuntu 18.04.2 LTS版本中，不会再出现Windows10对机械硬盘的分区抢夺导致Ubuntu系统进不去的问题，但挂载的机械硬盘分区还是保持只读状态，因此Window10依然要重启后才能进入Ubuntu。
